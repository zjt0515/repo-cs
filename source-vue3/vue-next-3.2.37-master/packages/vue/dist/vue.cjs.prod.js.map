{"version":3,"file":"vue.cjs.prod.js","sources":["../src/index.ts"],"sourcesContent":["// This entry is the \"full-build\" that includes both the runtime\n// and the compiler, and supports on-the-fly compilation of the template option.\nimport { initDev } from './dev'\nimport { compile, CompilerOptions, CompilerError } from '@vue/compiler-dom'\nimport { registerRuntimeCompiler, RenderFunction, warn } from '@vue/runtime-dom'\nimport * as runtimeDom from '@vue/runtime-dom'\nimport { isString, NOOP, generateCodeFrame, extend } from '@vue/shared'\nimport { InternalRenderFunction } from 'packages/runtime-core/src/component'\n\nif (__DEV__) {\n  initDev()\n}\n\nconst compileCache: Record<string, RenderFunction> = Object.create(null)\n\nfunction compileToFunction(\n  template: string | HTMLElement,\n  options?: CompilerOptions\n): RenderFunction {\n  if (!isString(template)) {\n    if (template.nodeType) {\n      template = template.innerHTML\n    } else {\n      __DEV__ && warn(`invalid template option: `, template)\n      return NOOP\n    }\n  }\n\n  const key = template\n  const cached = compileCache[key]\n  if (cached) {\n    return cached\n  }\n\n  if (template[0] === '#') {\n    const el = document.querySelector(template)\n    if (__DEV__ && !el) {\n      warn(`Template element not found or is empty: ${template}`)\n    }\n    // __UNSAFE__\n    // Reason: potential execution of JS expressions in in-DOM template.\n    // The user must make sure the in-DOM template is trusted. If it's rendered\n    // by the server, the template should not contain any user data.\n    template = el ? el.innerHTML : ``\n  }\n\n  const { code } = compile(\n    template,\n    extend(\n      {\n        hoistStatic: true,\n        onError: __DEV__ ? onError : undefined,\n        onWarn: __DEV__ ? e => onError(e, true) : NOOP\n      } as CompilerOptions,\n      options\n    )\n  )\n\n  function onError(err: CompilerError, asWarning = false) {\n    const message = asWarning\n      ? err.message\n      : `Template compilation error: ${err.message}`\n    const codeFrame =\n      err.loc &&\n      generateCodeFrame(\n        template as string,\n        err.loc.start.offset,\n        err.loc.end.offset\n      )\n    warn(codeFrame ? `${message}\\n${codeFrame}` : message)\n  }\n\n  // The wildcard import results in a huge object with every export\n  // with keys that cannot be mangled, and can be quite heavy size-wise.\n  // In the global build we know `Vue` is available globally so we can avoid\n  // the wildcard object.\n  const render = (\n    __GLOBAL__ ? new Function(code)() : new Function('Vue', code)(runtimeDom)\n  ) as RenderFunction\n\n  // mark the function as runtime compiled\n  ;(render as InternalRenderFunction)._rc = true\n\n  return (compileCache[key] = render)\n}\n\nregisterRuntimeCompiler(compileToFunction)\n\nexport { compileToFunction as compile }\nexport * from '@vue/runtime-dom'\n"],"names":["isString","NOOP","compile","extend","runtimeDom","registerRuntimeCompiler"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;AAaA,MAAM,YAAY,GAAmC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA;AAExE,SAAS,iBAAiB,CACxB,QAA8B,EAC9B,OAAyB;IAEzB,IAAI,CAACA,eAAQ,CAAC,QAAQ,CAAC,EAAE;QACvB,IAAI,QAAQ,CAAC,QAAQ,EAAE;YACrB,QAAQ,GAAG,QAAQ,CAAC,SAAS,CAAA;SAC9B;aAAM;YAEL,OAAOC,WAAI,CAAA;SACZ;KACF;IAED,MAAM,GAAG,GAAG,QAAQ,CAAA;IACpB,MAAM,MAAM,GAAG,YAAY,CAAC,GAAG,CAAC,CAAA;IAChC,IAAI,MAAM,EAAE;QACV,OAAO,MAAM,CAAA;KACd;IAED,IAAI,QAAQ,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;QACvB,MAAM,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAA;;;;;QAQ3C,QAAQ,GAAG,EAAE,GAAG,EAAE,CAAC,SAAS,GAAG,EAAE,CAAA;KAClC;IAED,MAAM,EAAE,IAAI,EAAE,GAAGC,mBAAO,CACtB,QAAQ,EACRC,aAAM,CACJ;QACE,WAAW,EAAE,IAAI;QACjB,OAAO,EAAsB,SAAS;QACtC,MAAM,EAAoCF,WAAI;KAC5B,EACpB,OAAO,CACR,CACF,CAAA;;;;;IAoBD,MAAM,MAAM,IAC0B,IAAI,QAAQ,CAAC,KAAK,EAAE,IAAI,CAAC,CAACG,qBAAU,CAAC,CACxD,CAGlB;IAAC,MAAiC,CAAC,GAAG,GAAG,IAAI,CAAA;IAE9C,QAAQ,YAAY,CAAC,GAAG,CAAC,GAAG,MAAM,EAAC;AACrC,CAAC;AAEDC,kCAAuB,CAAC,iBAAiB,CAAC;;;;;;;"}